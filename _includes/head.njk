{# Sitewide head element used in all pages #}
{%- set headTitle = title or metadata.title %}
{%- set headDescription = teaser or description or metadata.description %}
{%- set headImageAlt = imageAlt or metadata.titleImageAlt %}
{%- set headImageType = imageType or metadata.titleImageType %}
{%- set headOGType = "article" if page.url.includes("/blog/") else "website" %}
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{{ headTitle }}</title>
  <meta name="description" content="{{ headDescription }}">

  {# Favicons, credit: https://evilmartians.com/chronicles/how-to-favicon-in-2021-six-files-that-fit-most-needs #}
  {%- if metadata.environment === "production" %}
  <link rel="icon" href="/favicon/favicon.ico" sizes="32x32">
  <link rel="icon" href="/favicon/favicon.svg" type="image/svg+xml" sizes="any">
  {%- else %}
  <link rel="icon" href="/favicon/favicon-dev.ico" sizes="32x32">
  <link rel="icon" href="/favicon/favicon-dev.svg" type="image/svg+xml" sizes="any">
  {%- endif %}
  <link rel="apple-touch-icon" href="/favicon/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.webmanifest">

  {# Let's others know this site was created using 11ty #}
  <meta name="generator" content="{{ eleventy.generator }}">

  {# RSS feeds #}
  <link rel="alternate" href="/feed.xml" type="application/atom+xml" title="{{ metadata.title }}">
  <link rel="alternate" href="/feed.json" type="application/feed+json" title="{{ metadata.title }}">

  {# SEO #}
  <meta name="google-site-verification" content="hb0oFgJAnd2i2LvJYSEIofF5sc24xc8hx2tTNittvHA">
  <meta name="msvalidate.01" content="2515EC227874C1EE104D3FB4124CC9C5">

  {# Social: Open Graph tags #}
  <meta property="og:locale" content="en_US">
  <meta property="og:title" content="{{ headTitle }}">
  <meta property="og:description" content="{{ headDescription }}">
  <meta property="og:logo" content="{{ metadata.url }}{{ metadata.logoImage }}">
  <meta property="og:type" content={{ headOGType }}>
  <meta property="og:url" content={{ metadata.url }}{{ page.url.slice(1) }}>
  <meta property="og:site_name" content={{ metadata.title }}>
  {%- if largeImage %}
  <meta property="og:image" content="{{ metadata.url }}{{ largeImage }}">
  {%- elif image %}
  <meta property="og:image" content="{{ metadata.url }}{{ image }}">
  {%- else %}
  <meta property="og:image" content="{{ metadata.url }}{{ metadata.titleImage }}">
  {%- endif %}
  <meta property="og:image:alt" content="{{ headImageAlt }}">
  <meta property="og:image:type" content="{{ headImageType }}">

  {# Social: Twitter/X #}
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@chrislhenrick">
  <meta name="twitter:creator" content="@chrislhenrick">
  <meta name="twitter:title" content="{{ headTitle }}">
  <meta name="twitter:description" content="{{ headDescription }}">
  {%- if image %}
  <meta name="twitter:image" content="{{ metadata.url }}{{ image }}">
  {%- else %}
  <meta name="twitter:image" content="{{ metadata.url }}{{ metadata.titleImage }}">
  {%- endif %}
  <meta property="twitter:image:alt" content="{{ headImageAlt }}">

  {# NOTE: All common CSS used throughout the site are added here. In dev they are created as links, in prod all CSS is concatenated and inlined for a small performance boost. #}
  {%- set partials %}
      base/reset,
      base/base,
      base/utils,
      components/button,
      layouts/header,
      layouts/footer
    {% endset %}
  {% include "styles.njk" %}

  <script>
    {# prevents a flash of un-themed content #}
    const theme = localStorage.getItem("theme");
    if (theme) {
      document.documentElement.dataset.theme = theme;
    }
  </script>
</head>
