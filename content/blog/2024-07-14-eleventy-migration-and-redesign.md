---
title: "This site is under construction!"
date: 2024-07-14
updated: 2024-12-01
teaser: "Notes on migrating this website from Jekyll to Eleventy, as well as a bit of (re)design in the open."
tags:
  - Eleventy
  - A11Y
  - Accessibility
  - JavaScript
  - Design
---

## Introduction

Earlier this year I began migrating this website, [{{ metadata.title }}]({{ metadata.url }}), from using [Jekyll](https://jekyllrb.com/) to [Eleventy (11ty)](https://www.11ty.dev/) as a website build tool. There were a bunch of underlying factors that pushed me to do the migration, which I'll discuss in this post. Unlike other posts I've previously written, I won't really dive into the technical aspects of the process (okay let's be real, there will obviously still be some technical details included here), this will be more about the "why" then the "how". The migration presented an opportunity for redesigning parts of the site which I'll also touch on.

## Why did I do this?

It's hard to say what the biggest driving force in motivating me to say "it's time for a refresh", but there is one that stands out among the rest. As I've grown in my role as a front-end web developer and design engineer, my understanding and appreciation of web accessibility has become paramount in how I approach creating things for the web. At some point I realized, "hey my own damn website has some barriers to being accessible by people with disabilities", which didn't make me feel good. Actually, what made me feel worse was knowing that I knew how to solve the majority of these issues such as color contrast, lack of alt text, lack of supporting robust keyboard navigation, etc. but was allowing them to stand. If I want to position myself as a design engineer that is passionate and knowledgeable about web accessibility, then my own website sure as hell should be accessible. No "ifs", "ands", or "buts" about it.

I'm happy to say that the current iteration of this website is a lot more accessible and inclusive then my previous site was. It's not perfect by any means, but I've done my best to conform to the [Web Content Accessibility Guidelines (WCAG) version 2.2](https://www.w3.org/TR/WCAG22/), level AA. For example, the site now has a skip link, does not fail color contrast for text or UI elements, has alt text for images, uses semantic HTML throughout, and cautiously reaches for ARIA only when it is appropriate to enhance the experience for users of assistive technologies. An additional usability enhancement includes supporting color themes for both light and dark modes whereas my previous site design was dark mode only. Related to color themes: I've made sure that the site is usable in [forced colors](https://polypane.app/blog/forced-colors-explained-a-practical-guide/) mode. For example, buttons will still look like buttons and links will still be discernable as links by respecting the system colors imposed on the styling of the site's HTML when forced colors mode is active.

In addition to making this site more accessible, I'm utilizing "progressive enhancement" strategies, such as making sure the site works without JavaScript. Unlike websites and applications built with client-side JavaScript frameworks such as React, there is no feature in this site that I consider critical which requires JavaScript in order for it to function. The [contact](/contact/) and [portfolio](/work/) pages are examples of this. Both pages use JavaScript to "enhance" their functionality, but if the user has JavaScript disabled or if the JavaScript fails to load for some reason the pages will still work. I encourage you to give it a try: go to your browser settings and [disable JavaScript](https://duckduckgo.com/?q=disable+browser+javascript), then visit one of those pages. Then re-enable it, refresh the page, and notice what is different.

## Why make the switch to Eleventy?

Granted that instead of re-writing much of the code that generates this site AND using an entire different build tool, I very well could have stuck with using Jekyll and refactored the existing code. One thing that kept me from going this route was that I had grown tired of remembering how to do certain things in [Ruby](https://www.ruby-lang.org/en/), like upgrade dependencies or Ruby itself, or use a Ruby version manager. Okay, okay, you're right, Ruby is a fine programming language, it's similar enough to Python (which I'm more familiar with), and managing [RubyGems](https://en.wikipedia.org/wiki/RubyGems) is not rocket science. Jekyll has also been around a lot longer than Eleventy so it has robust documentation, plenty of answers on Stack Overflow, and in general works pretty damn well.

The thing is, I spend my day to day in JavaScript land and don't write any Ruby on the side. Like, none at all. I have nothing against Ruby, it's just not something I currently aspire to use or have a need to use. Maybe one day that will change, but it's clearly not happening anytime soon. The fact is I'm a lot more comfortable using modern JavaScript and am very familiar with its ecosystem (e.g. npm, Yarn, Webpack, Vite, Rollup, ES Modules, etc.) and environs (Web Browser vs. NodeJS), so it naturally feels easier for me to work in. Having to remember how to do stuff with Ruby every few months often made me feel less motivated to work on my website. My thinking was that if I'm more comfortable with the tooling, then I'll probably feel more motivated to work on my website. This remains to be seen, time will tell, insert clich√© here, etc; but I have a feeling that lowering this barrier to entry will have a significant impact on my motivation.

Reaching for Eleventy felt like the sensible thing to do. I had already used it in a very minimal capacity for creating the [Color Legend Element's documentation](https://clhenrick.github.io/color-legend-element/) (only a single web page) and was interested in using it for a multi-page site for some time. It's configurable using JavaScript. It's freaking fast when it comes to [building a site from a bunch of Markdown files](https://www.11ty.dev/docs/performance/#build-performance). Other appealing aspects of Eleventy were continuing to write posts using Markdown with front-matter, leveraging 11ty's concept of the ["data cascade"](https://www.11ty.dev/docs/data-cascade/), and having access to a wide range of HTML templating options. The [Eleventy Image Plugin](https://www.11ty.dev/docs/plugins/image/) was appealing for reducing the amount of data transferred over the wire for the almost 300 images on my site; I now serve most images in WebP format with a JPEG fallback, and in a size that attempts to match the size of the browser's viewport width and device's pixel density. Pages are still server side rendered, and now all CSS and JavaScripts are inlined to avoid extra network requests. There's [so much more you can do with Eleventy](https://11tybundle.dev/), and I've only begun to scratch the surface of what's possible with this site migration.

Overall I've found Eleventy to be almost like a low level static site generator API, for better or worse. The good part is that you can really get into the nitty gritty of customizing how your site is structured and built. However, this also means you don't get everything out of the box for free as you might with other static site generators like Jekyll, so a lot of Eleventy's functionality requires editing its [config file](https://github.com/clhenrick/clhenrick.io/blob/feb894ed08d498822ca07b79aa2335cc2e492fbf/eleventy.config.js). Most of the time this is relatively straight forward, but sometimes it takes some trial and error to get things to work. Another downside I've found is that the docs feel a little incomplete at times, so I had to go digging across the internet to figure certain things out. I'm still not quite sure why when rendering pages dynamically using data they don't show up in `collections.all` for example. Thankfully Eleventy has been around for some years now and a lot of people have written about it, including my awesome co-worker [Aleksandr Hovhannisyan](https://www.aleksandrhovhannisyan.com), which has been really helpful when it comes to getting unstuck (seriously, thank you Aleksandr!). It seems to have a pretty enthusiastic and solid community supporting it, not to mention a stellar core maintainer [Zach Leatherman](https://www.zachleat.com/) who (IMO) has a lot of sensible opinions about how creating, sharing, and consuming content on the web should work. I was definitely thankful for the [Eleventy Base Blog](https://github.com/11ty/eleventy-base-blog) and [official documentation](https://www.11ty.dev/docs/) to reference for setting up this site, it made the migration from Jekyll a lot easier.

## But isn't refactoring code typically more efficient than rewriting it?

As for deciding to not refactor the site's previous code, well that kind of relates to not wanting to stick with Jekyll / Ruby / et al, but there were some additional motivators. Long story short, I originally forked a community Jekyll theme called ["Feeling Responsive"](https://phlow.github.io/feeling-responsive/) and modified it slightly to personalize it a bit, but I never got to know the code in-depth. At the time of forking the code, my immediate needs were strictly practical and time sensitive: to have an online presence to showcase my work with the goal of helping me land a (hopefully decent) job. I can definitely say that it [has helped](/about/cv/#professional-experience).

Fast forward almost ten years later. When I looked at the "Feeling Responsive" source code I felt that there was a lot I could do without. With both the visitor's data plan and our warming planet in mind, I could drop a lot of the extra stuff to make the site load a lot faster and consume fewer resources and bytes. I didn't need a CSS framework ([Foundation](https://get.foundation/)). I didn't need a CSS pre-processor ([Sass](https://sass-lang.com/)). I [didn't need JQuery](https://youmightnotneedjquery.com/). I didn't need a [custom media player JavaScript library](http://www.mediaelementjs.com/). The [masonry layout](https://masonry.desandro.com/) for my portfolio page felt kinda gimmicky. I should mention, however, at the time of this writing masonry grid layouts still require using JavaScript for cross browser support. Who knows, I might add it back some day, but it was one feature that I felt wasn't that important to me anymore, so I dropped it.

Those are some examples of where I felt I could trim down the site, to make it more minimal, and instead take advantage of the web platform having matured over the last decade. There is now robust support for [CSS Grid](https://developer.mozilla.org/en-US/docs/Web/CSS/grid) and [Flexbox](https://developer.mozilla.org/en-US/docs/Web/CSS/flex) which alleviates the need for grid layouts that CSS frameworks traditionally provided. [CSS custom properties](https://developer.mozilla.org/en-US/docs/Web/CSS/--*) mean you can use variables in CSS without having to reach for a CSS pre-processor (although I'll admit that's not the only thing Sass or PostCSS are good for). JQuery isn't necessary (especially for a simple website or blog), as all the major, modern browsers have largely compatible JavaScript APIs and support [ES6](https://262.ecma-international.org/6.0/index.html) and above.

All of that being said, I was able to port much of the existing code and refactor things where it made sense to do so. For example, [Liquid](https://shopify.github.io/liquid/) markup that I ported to [Nunjucks](https://mozilla.github.io/nunjucks/) for HTML templating. Other things were more tedious, such as combing through old blog posts and updating syntax for code blocks. Or swapping out image tags with [shortcodes](https://www.11ty.dev/docs/shortcodes/) for using the [Eleventy Image Plugin](https://www.11ty.dev/docs/plugins/image/).

## Designing with accessibility in mind

A benefit of starting from a (mostly) clean slate meant I could think about accessibility at the design phase before and while building the site. That's very different than treating accessibility as a reactionary action item to check off at some point after the site had already been built and accumulated tech debt (well I digress, lots of images in the site still could use better alt text, for example). I knew I could start with structuring the HTML in a sensible way to follow best practices in terms of semantics, landmarks, and headings. I could start with a color palette that would meet WCAG level AA color contrast requirements. I made sure focus indicators were visible and accessible on all interactive and focusable UI elements _as I was designing them_. I deliberately decided against using UI patterns that might cause accessibility barriers such as a sticky navigation or fluid typography. I respect the user's "prefers reduced motion" setting and not animate or transition things if it is set. The age old saying "keep it simple stupid" helps out here more than you think.

Doing this migration and redesign while working a full time job as a front-end / design engineer at [Esri](https://www.esri.com/) wasn't easy. Trying to squeeze in ten, twenty, thirty or sixty minutes here or there through out the week is a very different way of doing web design and development when compared to doing it six to eight hours a day Monday through Friday. Although the work felt very fragmented at times I recognized that I was slowly chipping away at things and saw the light at the end of the tunnel. In fact, _this work is by no means done!_ I'm launching the new version of this site from a place I'm deeming "good enough" rather than letting the perfectionist in me wait until every last little pixel is the precise way I want it. Henceforth I'll be ["designing in the open"](https://bradfrost.com/blog/post/designing-in-the-open/) to tie up some loose ends over the next few months, at the very least if not indefinitely. I'm not entirely happy with the colors or look of the light theme, probably because I'm more partial to dark mode / themes when I'm at a computer, so that will probably change at some point. There are some minor accessibility issues to tie up and I'll continue to strive to make the site more inclusive and accessible as time goes on.

With the redesign I'm intentionally trying to adhere to the highly dynamic nature of the web, where nothing will ever look exactly the same to everyone across every type of device and situation. Not to mention catering to users who may have a vision impairment or other disability and as a result may not care what the site looks like at all, only that they can access its content in the way that is appropriate to them.

One deliberate decision that relates to this was to throw out Google Fonts and instead only use "system fonts." That is, rather than load one or more font families and their variants from Google's servers, use a font that already exists on a user's device which fits the bill for the general typographic vibe I'm going for. (Shout out to the folks who created the website and resource [Modern Font Stack](https://modernfontstacks.com) for making this pretty darn easy and fun to do! I'm currently using their [Geometric Humanist](https://github.com/system-fonts/modern-font-stacks#geometric-humanist) font stack.) One advantage of this strategy is that there's no "flash of un-styled text" or layout shift when a font is downloaded after the page has first rendered. Nor are extra resources being used to download one or more fonts and render them on the page. Instead the page renders with the first desirable font that's found on the user's device. As my friend Andy of [Lord's Luggage](https://www.lordsluggage.com/) in Portland, Oregon likes to say, "it's what you're getting." It's a trade off for sure, as it limits your options for typographic styles, but it's one I think is worth it in terms of saving resources and giving into how malleable and dynamic the web is, rather than trying to force a pixel perfect image of a website onto everyone who visits it, no matter their situation (e.g. device type, internet connection, data plan, physical environment, etc).

## Phew!

So there you have it. This site is now built with Eleventy. It aims to be more inclusive and accessible, to use fewer digital resources, yet still be a unique place that represents who I am (professionally at least) online. I hope you appreciate it. If you have any thoughts, questions, suggestions, or comments please don't hesitate to [contact me](/contact/). I'm also active on [Mastodon](<{{metadata.socialLinks.get("Mastodon")}}>) if you would like to reach or follow me there. Thanks for reading!
