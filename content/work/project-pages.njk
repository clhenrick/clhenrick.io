---
pagination:
  data: work
  size: 1
  alias: project
permalink: "work/{{ project.title | slugify }}/"
eleventyComputed:
  title: "{{ project.title }}, Portfolio"
  kofiUrl: "{{ metadata.socialLinks.get('Ko-Fi') }}"
  description: "{{ project.description }}"
  eleventyNavigation:
    key: "{{ project.title }}"
    parent: "work"
---

{%- set partials %}
  components/disclosure, components/embed, components/kofi, pages/project-pages
{%- endset %}
{%- set bucket = "project-pages" %}
{% include "styles.njk" %}
{% from "components/kofi.njk" import kofi %}

<section>
  <h1>{{ project.title }}</h1>

  <p>{{ project.description | markdownInline | safe }}</p>

  <dl>
    {% if project.date %}
      <div>
        <dt>Date:</dt>
        <dd>{{ project.date | dateFromISOString("LLLL d, yyyy") }}</dd>
      </div>
    {% endif %}

    {% if project.link %}
      <div>
        <dt>Project link:</dt>
        <dd>
          <a href="{{ project.link }}">{{ project.title }}</a>
        </dd>
      </div>
    {% endif %}

    {% macro formatGitHubLink(text) %}
      {{ text | replace("https://", "") | replace("github", "GitHub", 1) }}
    {% endmacro %}

    {% if project.code %}
      <div>
        <dt>Code:</dt>
        {% if project.code | isArray %}
          {% for link in project.code %}
            <dd>
              <a href="{{ link }}">{{ formatGitHubLink(link) }}</a>
            </dd>
          {% endfor %}
        {% else %}
          <dd>
            <a href="{{ project.code }}"
              >{{ formatGitHubLink(project.code) }}</a
            >
          </dd>
        {% endif %}
      </div>
    {% endif %}
  </dl>
</section>

{% if project.tech %}
  <section>
    <h2>Technologies Used</h2>
    <ul class="tech-tags" role="list" translate="no">
      {% for tag in project.tech %}
        <li>{{ tag }}</li>
      {% endfor %}
    </ul>
  </section>
{% endif %}

<section>
  <h2>Project Details</h2>
  {% if project.description_long %}
    <details open>
      <summary>About {{ project.title }}</summary>
      {{ project.description_long | markdown | safe }}
    </details>
  {% endif %}

  {% if project.video %}
    {# iframe embed technique credit: https://adrianroselli.com/2024/01/embed-slides-youtube-videos-and-more.html #}
    {% set srcdocStyle %}
      <style>
        * {
          padding: 0;
          margin: 0;
          overflow: hidden;
        }
        html,
        body {
          height: 100%;
        }
        body {
          display: flex;
          align-items: center;
          justify-content: center;
          background-image: url(/img/{{ project.video.thumb }});
          background-repeat: no-repeat;
          background-size: cover;
          background-position: center center;
        }
        a[href] {
          display: block;
          width: 70px;
          height: 70px;
          color: rgba(0, 0, 0, 0.75);
          border-radius: 50%;
        }
        a[href]:focus-visible,
        a[href]:hover {
          color: orange;
        }
        a[href]:focus-visible {
          outline: 3px solid blue;
        }
        svg {
          fill: currentColor;
        }
      </style>
    {% endset %}
    {% set svgIcon %}
      <a href="{{ project.video.embed }}"
        ><svg
          role="image"
          aria-label="play"
          xmlns="http://www.w3.org/2000/svg"
          xml:space="preserve"
          width="70"
          height="70"
          viewBox="0 0 60 60"
        >
          <path
            d="M30 0C13.458 0 0 13.458 0 30s13.458 30 30 30 30-13.458 30-30S46.542 0 30 0zm15.563 30.826-22 15a1.002 1.002 0 0 1-1.03.058A.999.999 0 0 1 22 45V15a.999.999 0 0 1 1.564-.826l22 15a1.001 1.001 0 0 1-.001 1.652z"
          /></svg
      ></a>
    {% endset %}

    <div style="--aspect-ratio: 16/9;margin-bottom:2.5rem;">
      <iframe
        width="960"
        height="569"
        src="{{ project.video.embed }}"
        srcdoc="{{ srcdocStyle | replace("\n", "") | replace(" ", "") }}{{ svgIcon | replace("\n", "") }}"
        frameborder="0"
        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
        title="{{ project.video.title }}"
      ></iframe>
    </div>

    {% set videoDescription = project.video.desc %}
    {% if videoDescription %}
      <h3>Video Description</h3>
      {{ videoDescription | markdown | safe }}
    {% endif %}
  {% endif %}

  {% if project.imgs %}
    <ul class="screenshots" role="list">
      {% for img in project.imgs %}
        <li>
          {%- set altText %}Screenshot {{ loop.index }} of {{ project.title }}{%- endset %}
          {%- if project.imgsAlt -%}
            {%- set altText = project.imgsAlt[loop.index0] -%}
          {%- endif -%}
          {# NOTE: the code below uses the image shortcode #}
          {%- image img, altText, constants.IMAGE_WIDTHS_WIDE_PAGE_LAYOUT, constants.IMAGE_SIZES_WIDE_PAGE_LAYOUT %}
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</section>

{{ kofi(kofiUrl, "project") }}

<nav class="secondary" aria-label="secondary">
  <a href="/work/">
    <span aria-hidden="true" class="back-arrow">&#8619;</span> Go back to the
    Portfolio
  </a>
  <a href="#main" aria-labelledby="back-top">
    <span id="back-top" hidden>Go back to top of page</span>
    <span aria-hidden="true">&#8679;</span>
  </a>
</nav>

{%- set javascripts -%}
  disclosure-widgets
{%- endset -%}
{%- set bucket = "project-pages" -%}
{%- include "scripts.njk" -%}
